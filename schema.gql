type User @collection(name: "users") {
  username: String!
  email: String!
  shelves: [Shelf] @relation
}

type Shelf @collection(name: "shelves") {
  title: String!
  key: String!
  owner: User! @relation
  books: [Book] @relation
}

type Book @collection(name: "books") {
  googleBookId: ID!
  volumeInfo: BookSourceVolumeInfo!
  shelves: [Shelf] @relation
}

type BookSourceVolumeInfo @embedded {
  title: String!
  authors: [String!]!
  publisher: String!
  description: String!
  imageLinks: BookSourceImageLinks
}

type BookSourceImageLinks @embedded {
  smallThumbnail: String
  thumbnail: String
}

type Query {
  me: User! @resolver(name: "fetch_me")
  findShelvesByBookAndUser(bookID: ID!, userID: ID!): [Shelf]!
    @resolver(name: "find_shelves_by_book_and_user", paginated: true)
}
